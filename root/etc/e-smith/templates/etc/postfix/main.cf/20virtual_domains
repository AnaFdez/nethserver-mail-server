#
# 20virtual_domains -- Virtual domains are { 
    use NethServer::MailServer;
    @localDomains = NethServer::MailServer->new()->getDeliveryDomains();
    @virtual_mailbox_domains = (@localDomains, @virtual_mailbox_domains);

    scalar @localDomains ? 'enabled' : 'disabled'; 
}
# 
virtual_alias_maps = { scalar @localDomains ? 'hash:/etc/postfix/virtual' : '' }

# Message delivery transport that the local(8) 
# delivery agent should use for mailbox delivery:
mailbox_transport = lmtp:unix:/var/run/dovecot/lmtp

# The default mail delivery transport and next-hop destination 
# for final delivery to domains listed with $virtual_mailbox_domains:
virtual_transport = lmtp:unix:/var/run/dovecot/lmtp


